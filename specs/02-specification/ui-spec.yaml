# ============================================================
# UI/UX Specification (UI 명세)
# Stage 6: 화면 구성과 인터랙션 정의
# ============================================================
# 의존성: functional-spec.yaml 기반으로 작성
# ============================================================
# 중요: UI 구현 시 반드시 @qanda/qds4-web 디자인 시스템만 사용
# 레퍼런스: templates/design-system/qds4-web.yaml
# 공식 문서: https://github.com/mathpresso/qanda-design-system-docs
# 데모 페이지: https://mathpresso.github.io/qanda-design-system-docs
# ============================================================

ui_spec:
  # ----------------------------------------------------------
  # 디자인 시스템 (Design System)
  # ----------------------------------------------------------
  # 반드시 @qanda/qds4-web 컴포넌트와 토큰만 사용
  # ----------------------------------------------------------
  design_system:
    package: "@qanda/qds4-web"
    version: "^0.0.2"
    reference: "templates/design-system/qds4-web.yaml"

    # 사용 가능한 색상 팔레트 (COLOR 토큰 사용 필수)
    # 전체 목록: gray, blue, orange, red, yellow, green (각 _0 ~ _100 또는 _5 ~ _95)
    color_palette:
      primary: "blue_50"       # 주요 액션, 링크
      secondary: "gray_60"     # 보조 텍스트
      error: "red_50"          # 에러 상태
      warning: "orange_50"     # 경고 상태
      success: "green_50"      # 성공 상태
      background: "gray_100"   # 기본 배경
      surface: "gray_95"       # 카드/섹션 배경
      text_primary: "gray_10"  # 주요 텍스트
      text_secondary: "gray_50" # 보조 텍스트
      highlight: "yellow_20"   # 하이라이트

    # 사용 가능한 타이포그래피 (typography() 함수 사용 필수)
    typography_scale:
      - "large_title"      # 페이지 메인 타이틀
      - "title_1_strong"   # 강조 주요 제목
      - "title_1"          # 주요 섹션 제목
      - "title_2_strong"   # 강조 서브 제목
      - "title_2"          # 서브 섹션 제목
      - "title_3_strong"   # 강조 소제목
      - "title_3"          # 소제목
      - "body_1_strong"    # 강조 본문
      - "body_1"           # 기본 본문
      - "body_2_strong"    # 강조 작은 본문
      - "body_2"           # 작은 본문
      - "caption_1"        # 캡션
      - "caption_2"        # 작은 캡션

    # 사용 가능한 브레이크포인트 (BREAKPOINT 상수 사용)
    breakpoints:
      SMALL: "360px"        # 모바일
      MEDIUM: "640px"       # 태블릿
      LARGE: "1200px"       # 데스크톱
      EXTRA_LARGE: "1600px" # 대형 화면

    # 사용 가능한 컴포넌트 목록
    # 상세 props는 qds4-web.yaml 참조
    allowed_components:
      buttons:
        - "Button"           # variant: neutral|accent|danger|tonal|outlined, size: l|m|s|xs
        - "TextButton"       # size: m|s
        - "IconButton"       # style: clear|border, iconSize: 24|20|16
        - "FloatingActionButton"  # color: neutral|accent
      forms:
        - "Checkbox"         # state: unselected|indeterminate|selected
        - "Checkmark"        # checked: boolean
        - "Radio"            # selectedValue matching
        - "Switch"           # checked: boolean
      navigation:
        - "TopAppBar"        # main, leading, trailing
        - "Tabs"             # type: scrollable|fixed, size: m|s
        - "SegmentedControl" # size: m|s
      dialogs:
        - "AlertDialog"      # confirmButton, cancelButton
        - "StandardDialog"   # size: s|m|l
        - "FullScreenDialog" # isOpen, onClose
        - "BottomSheet"      # title, footer
      feedback:
        - "Spinner"          # size: number
        - "LoadingAnimation" # size: number
        - "Badge"            # size: s|m, type: new|digit
        - "Tag"              # color: gray|blue|orange|red|yellow|green, style: filled|tonal
      layout:
        - "BottomFixedArea"  # position: sticky|fixed
        - "Divider"          # 구분선
      utilities:
        - "Icon"             # size, color
        - "Typography"       # typography() 함수
        - "Shadow"           # shadow(1|2) 함수
        - "StateLayer"       # stateLayer() 함수
        - "DesignSystemProvider"  # 앱 루트 필수

  # ----------------------------------------------------------
  # 화면 목록 (Screens)
  # ----------------------------------------------------------
  screens:
    # ========================================
    # SCR-001: 랜딩/업로드 페이지
    # ========================================
    - id: "SCR-001"
      name: "랜딩/업로드 페이지"
      route: "/"
      description: "서비스 소개 및 논문 업로드 진입점"
      implements_features: ["F-001", "F-002"]

      layout: |
        +------------------------------------------+
        |  TopAppBar (Logo, Auth)                  |
        +------------------------------------------+
        |                                          |
        |          Hero Section                    |
        |     "논문 읽기를 더 쉽게"                  |
        |     (Typography: large_title)            |
        |                                          |
        +------------------------------------------+
        |                                          |
        |      +------------------------+          |
        |      |                        |          |
        |      |    Drop Zone           |          |
        |      |    (PDF 업로드)         |          |
        |      |                        |          |
        |      +------------------------+          |
        |                                          |
        |      [ URL로 논문 불러오기 ]              |
        |      (Button: variant=accent)            |
        |                                          |
        +------------------------------------------+
        |  Footer                                  |
        +------------------------------------------+

      components:
        # QDS: TopAppBar 사용
        - id: "header"
          type: "TopAppBar"
          description: "상단 네비게이션 바"
          props:
            main: "ReactNode"        # 로고
            leading: "ReactNode"     # 뒤로가기 (없음)
            trailing: "ReactNode"    # 로그인/프로필 버튼
          states:
            - name: "logged_out"
              appearance: "trailing에 로그인 Button(variant=outlined) 표시"
              behavior: "클릭 시 인증 모달 열림"
            - name: "logged_in"
              appearance: "trailing에 사용자 아바타 IconButton 표시"
              behavior: "클릭 시 BottomSheet로 메뉴 표시"

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "hero_section"
          type: "CustomComponent"
          qds_components_used: ["Typography"]
          description: "서비스 소개 및 가치 제안"
          props:
            title: "string"
            subtitle: "string"
          states:
            - name: "default"
              appearance: "Typography(large_title)로 타이틀, Typography(body_1)로 부제목"
              behavior: null

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "upload_dropzone"
          type: "CustomComponent"
          qds_components_used: ["Button", "Icon", "Typography", "Spinner", "Tag"]
          description: "PDF 파일 드래그앤드롭 영역"
          props:
            acceptedTypes: "string[]"
            maxSize: "number"
          states:
            - name: "idle"
              appearance: "점선 테두리(gray_60), Icon(upload), Typography(body_1) 안내 텍스트"
              behavior: "클릭 시 파일 선택 다이얼로그"
            - name: "drag_over"
              appearance: "테두리 색상 blue_50, 배경색 blue_95"
              behavior: "드롭 대기"
            - name: "uploading"
              appearance: "Spinner 표시, Typography(body_2)로 파일명"
              behavior: "업로드 진행률 표시"
            - name: "error"
              appearance: "테두리 red_50, Tag(color=red, style=tonal)로 에러 메시지"
              behavior: "Button(variant=outlined)로 재시도"

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "url_input"
          type: "CustomComponent"
          qds_components_used: ["Button", "Spinner", "Typography"]
          description: "논문 URL 입력 필드 (input은 네이티브 HTML, 버튼은 QDS)"
          props:
            placeholder: "string"
          states:
            - name: "idle"
              appearance: "input 필드 + Button(variant=accent) 제출 버튼"
              behavior: "URL 입력 대기"
            - name: "loading"
              appearance: "Button 내 Spinner 표시"
              behavior: "다운로드 진행 중"
            - name: "error"
              appearance: "Typography(caption_1, color=red_50)로 에러 메시지"
              behavior: "재시도 가능"

      interactions:
        - trigger: "PDF 파일 드롭"
          action: "파일 업로드 시작"
          feedback: "Spinner 표시, 완료 시 뷰어로 이동"
        - trigger: "URL 입력 후 엔터 또는 버튼 클릭"
          action: "논문 다운로드 시작"
          feedback: "Button 내 LoadingAnimation, 완료 시 뷰어로 이동"
        - trigger: "로그인 버튼 클릭"
          action: "인증 StandardDialog 열기"
          feedback: "StandardDialog(size=m) 애니메이션"

      responsive:
        mobile: "SMALL 브레이크포인트, 세로 스택, 드롭존 터치 최적화"
        tablet: "MEDIUM 브레이크포인트, 드롭존 중앙 정렬"
        desktop: "LARGE 브레이크포인트, 넓은 드롭존, 좌우 여백"

      accessibility:
        focus_order: ["header", "upload_dropzone", "url_input"]
        aria_labels:
          upload_dropzone: "PDF 파일 업로드 영역"
          url_input: "논문 URL 입력"

    # ========================================
    # SCR-002: 논문 뷰어 페이지
    # ========================================
    - id: "SCR-002"
      name: "논문 뷰어 페이지"
      route: "/paper/{id}"
      description: "논문 읽기 및 AI 기능 사용 메인 화면"
      implements_features: ["F-003", "F-004", "F-005", "F-006", "F-007", "F-008"]

      layout: |
        +--------------------------------------------------+
        |  TopAppBar (Logo, Paper Title, Actions)          |
        +--------------------------------------------------+
        |  Toolbar (SegmentedControl + Switch)             |
        +------------------------+-------------------------+
        |                        |                         |
        |    PDF Original View   |    Parsed Text View     |
        |    (PDF.js 렌더링)      |    (파싱된 텍스트/번역)   |
        |                        |                         |
        |    - 원본 PDF 페이지    |    - 섹션별 텍스트       |
        |    - 줌 인/아웃        |    - 수식 렌더링         |
        |    - 페이지 네비게이션  |    - 하이라이트          |
        |                        |    - 번역 토글           |
        |                        |                         |
        +------------------------+-------------------------+
        |  (드래그로 분할 비율 조정 가능)                     |
        +--------------------------------------------------+

      components:
        # QDS: TopAppBar 사용
        - id: "viewer_header"
          type: "TopAppBar"
          description: "뷰어 상단 헤더"
          props:
            main: "ReactNode"        # 논문 제목 (Typography)
            leading: "ReactNode"     # IconButton(뒤로가기)
            trailing: "ReactNode"    # 액션 버튼들
          states:
            - name: "default"
              appearance: "leading에 IconButton(back), main에 Typography(title_2), trailing에 IconButton(share, more)"
              behavior: null

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "toolbar"
          type: "CustomComponent"
          qds_components_used: ["SegmentedControl", "Switch", "Spinner", "IconButton"]
          description: "AI 기능 토글 및 설정 툴바"
          props:
            features: "string[]"
          states:
            - name: "default"
              appearance: "Switch로 번역/하이라이트 토글, SegmentedControl로 요약/키워드 탭 전환"
              behavior: "각 기능 on/off"
            - name: "processing"
              appearance: "처리 중인 Switch 옆에 Spinner(size=16) 표시"
              behavior: "해당 Switch disabled 상태"

        # 좌우 분할 뷰 컨테이너
        - id: "split_view_container"
          type: "CustomComponent"
          qds_components_used: []
          description: "PDF 원본과 파싱된 텍스트를 좌우로 분할하여 표시하는 컨테이너"
          props:
            leftPanel: "ReactNode"    # PDF 원본 뷰어
            rightPanel: "ReactNode"   # 파싱된 텍스트 뷰어
            initialRatio: "number"    # 초기 분할 비율 (0.5 = 50:50)
            minWidth: "number"        # 각 패널 최소 너비 (px)
          states:
            - name: "default"
              appearance: "좌우 균등 분할, 중앙에 드래그 핸들"
              behavior: "드래그로 분할 비율 조정 가능"
            - name: "left_focused"
              appearance: "왼쪽 패널 70%, 오른쪽 패널 30%"
              behavior: "PDF 원본 집중 보기"
            - name: "right_focused"
              appearance: "왼쪽 패널 30%, 오른쪽 패널 70%"
              behavior: "텍스트/번역 집중 보기"
          interactions:
            - trigger: "분할선 드래그"
              action: "분할 비율 실시간 조정"
              feedback: "패널 너비 즉시 반영"
            - trigger: "분할선 더블클릭"
              action: "50:50 비율로 리셋"
              feedback: "애니메이션과 함께 리셋"

        # PDF 원본 렌더러 (PDF.js 기반) - 연속 스크롤 방식
        - id: "pdf_original_viewer"
          type: "CustomComponent"
          qds_components_used: ["LoadingAnimation", "IconButton", "Typography"]
          external_dependencies: ["react-pdf", "pdfjs-dist"]
          description: "PDF.js를 사용한 원본 PDF 연속 스크롤 뷰어"
          props:
            fileUrl: "string"           # PDF 파일 signed URL (Supabase Storage)
            currentPage: "number"       # 현재 페이지 번호 (외부 제어용)
            onPageChange: "function"    # 페이지 변경 콜백
            onTotalPagesChange: "function"  # 총 페이지 수 콜백
          internal_state:
            scale: "number"             # 줌 레벨 (0.5 ~ 3.0, 기본 1.0)
            numPages: "number"          # 총 페이지 수
            isLoading: "boolean"        # 로딩 상태
            error: "string | null"      # 에러 메시지
          render_mode: "continuous_scroll"  # 연속 스크롤 방식
          states:
            - name: "loading"
              appearance: "LoadingAnimation(size=48) 중앙 표시, 'PDF 로딩 중...' 텍스트"
              behavior: "PDF 문서 로딩 중"
            - name: "ready"
              appearance: |
                - 상단 컨트롤 바: 페이지 네비게이션 버튼, 현재 페이지/총 페이지 표시, 줌 컨트롤
                - 본문: 모든 페이지가 세로로 연속 배치, 각 페이지에 그림자 효과
                - 스크롤 시 화면 중앙에 가장 가까운 페이지가 현재 페이지로 표시
              behavior: |
                - 마우스/터치 스크롤로 전체 PDF 탐색
                - 이전/다음 버튼 클릭 시 해당 페이지 중앙으로 부드럽게 스크롤
                - 줌 인/아웃 시 모든 페이지 스케일 동시 변경
            - name: "error"
              appearance: "Typography(title_2, red_50)로 에러 메시지, Typography(body_1, gray_50)로 안내"
              behavior: "PDF 로드 실패 시 표시"
          sub_components:
            - id: "pdf_control_bar"
              description: "상단 페이지 네비게이션 및 줌 컨트롤 바"
              appearance: |
                - 페이지 네비게이션: IconButton(chevron_left), 페이지 번호 표시, IconButton(chevron_right)
                - 구분선
                - 줌 컨트롤: IconButton(zoom_out), 줌 퍼센트 표시, IconButton(zoom_in)
              styling:
                background: "gray_95"
                border_bottom: "1px solid gray_80"
                padding: "8px 16px"
            - id: "pdf_scroll_container"
              description: "모든 페이지를 담는 스크롤 컨테이너"
              appearance: "세로 스크롤, 페이지 중앙 정렬, 16px 간격"
              behavior: |
                - 스크롤 이벤트 감지하여 현재 페이지 업데이트
                - 프로그래매틱 스크롤과 사용자 스크롤 구분
            - id: "pdf_page_wrapper"
              description: "개별 PDF 페이지 래퍼"
              appearance: "boxShadow: '0 2px 8px rgba(0,0,0,0.3)', backgroundColor: white"
              behavior: "각 페이지에 ref 연결하여 스크롤 타겟으로 사용"
          interactions:
            - trigger: "이전/다음 버튼 클릭"
              action: "해당 페이지 요소로 scrollIntoView({ behavior: 'smooth', block: 'center' })"
              feedback: "부드러운 스크롤 애니메이션, 현재 페이지 번호 업데이트"
            - trigger: "스크롤"
              action: "화면 중앙에 가장 가까운 페이지를 현재 페이지로 설정"
              feedback: "컨트롤 바의 페이지 번호 실시간 업데이트"
            - trigger: "줌 인/아웃 버튼 클릭"
              action: "scale 값 0.25씩 증감 (범위: 0.5 ~ 3.0)"
              feedback: "모든 페이지 즉시 리렌더링"
          keyboard_shortcuts:
            "ArrowLeft": "이전 페이지로 스크롤"
            "ArrowRight": "다음 페이지로 스크롤"
            "+/=": "줌 인"
            "-": "줌 아웃"
          performance_notes:
            - "모든 페이지를 한 번에 렌더링하므로 페이지 수가 많은 PDF는 초기 로딩 시간 증가"
            - "각 Page 컴포넌트에 loading prop으로 개별 로딩 상태 표시"
            - "필요 시 가상화(virtualization) 적용 고려"

        # 파싱된 텍스트 뷰어 (기존 PdfViewer 개선)
        - id: "parsed_text_viewer"
          type: "CustomComponent"
          qds_components_used: ["Typography", "LoadingAnimation", "Tag"]
          description: "파싱된 논문 텍스트, 번역, 하이라이트 표시"
          props:
            paper: "Paper"
            sections: "Section[]"
            highlights: "Highlight[]"
            translation: "Translation | null"
            currentPdfPage: "number"  # PDF 뷰어와 동기화
          states:
            - name: "loading"
              appearance: "LoadingAnimation(size=48) 중앙 표시"
              behavior: "섹션 데이터 로딩 중"
            - name: "ready"
              appearance: "Typography 기반 섹션별 텍스트, KaTeX 수식 렌더링"
              behavior: "스크롤, 텍스트 선택 가능"
            - name: "translated"
              appearance: "번역문 Typography(body_1), 원문은 Typography(body_2, gray_50) 병기"
              behavior: "원문/번역 토글 가능"
            - name: "highlighted"
              appearance: "핵심 문장에 yellow_20 배경색 적용"
              behavior: "하이라이트 hover 시 이유 툴팁 표시"
          interactions:
            - trigger: "PDF 페이지 변경"
              action: "해당 페이지의 섹션으로 자동 스크롤"
              feedback: "부드러운 스크롤 애니메이션"
            - trigger: "섹션 클릭"
              action: "PDF 뷰어를 해당 페이지로 이동"
              feedback: "양쪽 뷰어 동기화"

        # QDS: BottomSheet 사용
        - id: "keyword_bottomsheet"
          type: "BottomSheet"
          description: "키워드 설명 바텀시트 (모바일 최적화)"
          props:
            title: "string"          # 키워드 용어
            footer: "ReactNode"      # 닫기 버튼
          states:
            - name: "visible"
              appearance: "Typography(title_3)로 용어, Typography(body_1)로 정의, Typography(body_2, gray_50)로 맥락"
              behavior: "외부 클릭 또는 드래그 다운 시 닫힘"

        # QDS: Switch 사용
        - id: "translation_toggle"
          type: "Switch"
          description: "번역 on/off 토글"
          props:
            checked: "boolean"
            onChange: "function"
            disabled: "boolean"
          states:
            - name: "off"
              appearance: "Switch checked=false"
              behavior: "원문만 표시"
            - name: "on"
              appearance: "Switch checked=true"
              behavior: "번역문 표시"
            - name: "loading"
              appearance: "Switch disabled=true + 옆에 Spinner(size=16)"
              behavior: "번역 처리 중"

      interactions:
        - trigger: "PDF 뷰어 스크롤"
          action: "현재 보이는 페이지 감지, 오른쪽 텍스트 뷰어를 해당 섹션으로 동기화"
          feedback: "부드러운 스크롤 애니메이션"
        - trigger: "PDF 이전/다음 버튼 클릭"
          action: "해당 페이지 중앙으로 스크롤, 텍스트 뷰어 동기화"
          feedback: "부드러운 스크롤 애니메이션"
        - trigger: "텍스트 뷰어 섹션 클릭"
          action: "왼쪽 PDF 뷰어를 해당 페이지로 스크롤"
          feedback: "PDF 페이지로 부드러운 스크롤"
        - trigger: "분할선 드래그"
          action: "좌우 패널 비율 조정"
          feedback: "실시간 너비 변경"
        - trigger: "번역 Switch on"
          action: "번역 요청 및 오른쪽 패널에 표시"
          feedback: "Spinner 표시 후 번역문 페이드인"
        - trigger: "하이라이트 문장 탭/클릭"
          action: "하이라이트 이유 표시"
          feedback: "툴팁 또는 BottomSheet로 이유 표시"
        - trigger: "줌 인/아웃"
          action: "PDF 뷰어 스케일 조정 (모든 페이지에 적용)"
          feedback: "모든 PDF 페이지 즉시 리렌더링"

      responsive:
        mobile: "SMALL 브레이크포인트, 탭으로 PDF/텍스트 전환 (분할 뷰 대신)"
        tablet: "MEDIUM 브레이크포인트, 좌우 분할 뷰 (드래그 조정 가능)"
        desktop: "LARGE 브레이크포인트, 좌우 분할 뷰 (넓은 화면 활용)"

      accessibility:
        focus_order: ["viewer_header", "toolbar", "pdf_original_viewer", "parsed_text_viewer"]
        aria_labels:
          pdf_original_viewer: "PDF 원본 뷰어"
          parsed_text_viewer: "파싱된 텍스트 뷰어"
          split_divider: "패널 분할선 - 드래그하여 크기 조정"
          translation_toggle: "번역 켜기/끄기"
        keyboard_shortcuts:
          "ArrowLeft": "PDF 이전 페이지"
          "ArrowRight": "PDF 다음 페이지"
          "+": "줌 인"
          "-": "줌 아웃"
          "t": "번역 토글"
          "h": "하이라이트 토글"
          "1": "PDF 뷰어에 포커스"
          "2": "텍스트 뷰어에 포커스"

    # ========================================
    # SCR-003: 내 논문 목록 페이지
    # ========================================
    - id: "SCR-003"
      name: "내 논문 목록"
      route: "/papers"
      description: "사용자가 업로드한 논문 목록 관리"
      implements_features: ["F-001"]

      layout: |
        +------------------------------------------+
        |  TopAppBar                               |
        +------------------------------------------+
        |  [ Button: 새 논문 업로드 ]  [ 검색 ]     |
        +------------------------------------------+
        |                                          |
        |  +--------+  +--------+  +--------+      |
        |  | Paper  |  | Paper  |  | Paper  |      |
        |  | Card   |  | Card   |  | Card   |      |
        |  +--------+  +--------+  +--------+      |
        |                                          |
        |  +--------+  +--------+  +--------+      |
        |  | Paper  |  | Paper  |  | Paper  |      |
        |  | Card   |  | Card   |  | Card   |      |
        |  +--------+  +--------+  +--------+      |
        |                                          |
        +------------------------------------------+
        |  FloatingActionButton (모바일)           |
        +------------------------------------------+

      components:
        # QDS: TopAppBar 사용
        - id: "papers_header"
          type: "TopAppBar"
          description: "논문 목록 상단 헤더"
          props:
            main: "ReactNode"        # 로고 또는 타이틀
            leading: "ReactNode"     # 뒤로가기 (홈에서 왔을 경우)
            trailing: "ReactNode"    # 프로필 IconButton
          states:
            - name: "default"
              appearance: "main에 Typography(title_1, '내 논문'), trailing에 IconButton(profile)"
              behavior: null

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "paper_grid"
          type: "CustomComponent"
          qds_components_used: ["LoadingAnimation", "Typography", "Button"]
          description: "논문 카드 그리드"
          props:
            papers: "Paper[]"
          states:
            - name: "loading"
              appearance: "LoadingAnimation(size=48) 중앙, 스켈레톤 카드 그리드"
              behavior: "데이터 로딩 중"
            - name: "empty"
              appearance: "Typography(title_2)로 빈 상태 메시지, Button(variant=accent)로 업로드 유도"
              behavior: "Button 클릭 시 업로드 페이지로 이동"
            - name: "populated"
              appearance: "CSS Grid로 카드 배치"
              behavior: "카드 클릭 시 뷰어로 이동"

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "paper_card"
          type: "CustomComponent"
          qds_components_used: ["Typography", "Tag", "IconButton", "Spinner", "Shadow", "StateLayer"]
          description: "개별 논문 카드"
          props:
            paper: "Paper"
          states:
            - name: "default"
              appearance: "shadow(1), Typography(title_3)로 제목, Typography(caption_1, gray_50)로 날짜, Tag로 상태 표시"
              behavior: "클릭 시 뷰어로 이동"
            - name: "processing"
              appearance: "Spinner 오버레이, Tag(color=blue, style=tonal)로 '분석 중' 표시"
              behavior: "분석 진행 중"
            - name: "hover"
              appearance: "shadow(2), StateLayer, trailing에 IconButton(delete, share) 표시"
              behavior: "삭제, 공유 버튼 노출"

        # 커스텀 컴포넌트 (QDS 기반 조합)
        - id: "search_bar"
          type: "CustomComponent"
          qds_components_used: ["Icon", "Typography"]
          description: "논문 검색 필드 (input은 네이티브 HTML)"
          props:
            placeholder: "string"
          states:
            - name: "idle"
              appearance: "Icon(search, gray_50), placeholder 텍스트"
              behavior: "포커스 시 확장"
            - name: "active"
              appearance: "border blue_50, 입력 필드 확장"
              behavior: "실시간 필터링"

        # QDS: Button 사용
        - id: "upload_button"
          type: "Button"
          description: "새 논문 업로드 버튼"
          props:
            variant: "accent"
            size: "m"
          states:
            - name: "default"
              appearance: "Button(variant=accent, size=m), '새 논문 업로드' 텍스트"
              behavior: "클릭 시 업로드 페이지로 이동"

        # QDS: FloatingActionButton 사용 (모바일)
        - id: "upload_fab"
          type: "FloatingActionButton"
          description: "모바일용 업로드 FAB"
          props:
            color: "accent"
            icon: "add"
          states:
            - name: "default"
              appearance: "FloatingActionButton(color=accent), add 아이콘"
              behavior: "클릭 시 업로드 페이지로 이동"

      interactions:
        - trigger: "논문 카드 클릭"
          action: "뷰어 페이지로 이동"
          feedback: "StateLayer 피드백 후 페이지 전환"
        - trigger: "삭제 IconButton 클릭"
          action: "AlertDialog로 삭제 확인"
          feedback: "AlertDialog 표시, 확인 시 카드 페이드아웃"
        - trigger: "검색어 입력"
          action: "제목으로 필터링"
          feedback: "즉시 필터링 적용"

      responsive:
        mobile: "SMALL 브레이크포인트, 1컬럼 리스트, FloatingActionButton 표시, upload_button 숨김"
        tablet: "MEDIUM 브레이크포인트, 2컬럼 그리드"
        desktop: "LARGE 브레이크포인트, 3-4컬럼 그리드, FAB 숨김, upload_button 표시"

      accessibility:
        focus_order: ["search_bar", "upload_button", "paper_grid"]
        aria_labels:
          paper_grid: "내 논문 목록"
          search_bar: "논문 검색"
          upload_fab: "새 논문 업로드"

  # ----------------------------------------------------------
  # 공유 컴포넌트 (Shared Components)
  # ----------------------------------------------------------
  # 반드시 QDS 컴포넌트 사용
  # ----------------------------------------------------------
  shared_components:
    # QDS: Spinner 사용
    - id: "loading_spinner"
      type: "Spinner"
      description: "로딩 인디케이터"
      props:
        size: "number"  # 16, 24, 32, 48 등
      note: "QDS Spinner 컴포넌트 직접 사용"

    # QDS: LoadingAnimation 사용
    - id: "loading_animation"
      type: "LoadingAnimation"
      description: "큰 로딩 애니메이션"
      props:
        size: "number"
      note: "전체 페이지 로딩 시 사용"

    # 커스텀 컴포넌트 (QDS 기반 조합)
    - id: "error_message"
      type: "CustomComponent"
      qds_components_used: ["Typography", "Tag", "Button"]
      description: "에러 메시지 표시"
      props:
        type: "error | warning | info"
        message: "string"
        action: "string | null"
      note: "Tag(color=red|orange|blue)와 Typography 조합"

    # QDS: AlertDialog 사용
    - id: "confirm_dialog"
      type: "AlertDialog"
      description: "확인 다이얼로그"
      props:
        title: "string"
        description: "string"
        confirmButton: "ReactNode"  # Button(variant=danger)
        cancelButton: "ReactNode"   # Button(variant=outlined)
      note: "QDS AlertDialog 컴포넌트 직접 사용"

    # 커스텀 컴포넌트 (QDS 기반 조합) - 토스트는 QDS에 없음
    - id: "toast"
      type: "CustomComponent"
      qds_components_used: ["Typography", "Icon", "Shadow"]
      description: "알림 토스트 (커스텀 구현 필요)"
      props:
        type: "success | error | info"
        message: "string"
        duration: "number"
      position: "bottom-center"
      note: "QDS에 Toast 없음, Typography + Icon + Shadow로 커스텀 구현"

# ============================================================
# 메타데이터
# ============================================================
metadata:
  created_at: "2025-01-13T11:30:00+09:00"
  updated_at: "2025-01-13T18:00:00+09:00"
  author: "assistant"
  status: "draft"
  depends_on:
    - "functional-spec.yaml"
  design_system:
    package: "@qanda/qds4-web"
    version: "^0.0.2"
    reference: "templates/design-system/qds4-web.yaml"
  statistics:
    total_screens: 3
    total_components: 21
    total_shared_components: 5
    qds_direct_components: 8
    custom_components_using_qds: 13
  changelog:
    - date: "2025-01-13"
      changes:
        - "pdf_original_viewer: 단일 페이지 방식에서 연속 스크롤 방식으로 변경"
        - "pdf_original_viewer: 페이지 버튼 클릭 시 해당 페이지 중앙으로 스크롤"
        - "pdf_original_viewer: 스크롤 시 현재 페이지 자동 감지 기능 추가"
        - "fileUrl prop이 signed URL을 받도록 명세 변경 (private bucket 지원)"
