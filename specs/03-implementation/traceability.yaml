# ============================================================
# Traceability Matrix (추적성 매트릭스)
# 스펙 간의 연결 관계를 정의하여 영향 분석 자동화
# ============================================================
# 이 파일이 있어야 변경 시 영향 범위를 자동으로 파악 가능
# ============================================================

traceability:
  # 요구사항 → 기능 매핑
  # "이 요구사항은 어떤 기능으로 구현되나?"
  requirements_to_features:
    US-001: ["F-001", "F-002"]
    US-002: ["F-003", "F-004"]
    US-003: ["F-005"]
    US-004: ["F-006", "F-007"]
    US-005: ["F-008"]

  # 기능 → 기술 요소 매핑
  # "이 기능은 어떤 API, DB 테이블, 컴포넌트를 사용하나?"
  features_to_technical:
    F-001:
      api_endpoints: ["/api/papers"]
      data_models: ["Paper", "Section"]
      components: ["UploadDropzone"]
    F-002:
      api_endpoints: ["/api/papers/url"]
      data_models: ["Paper", "Section"]
      components: ["URLInput"]
    F-003:
      api_endpoints: ["/api/papers/{id}"]
      data_models: ["Paper", "Section"]
      components: ["PDFViewer"]
    F-004:
      api_endpoints: []
      data_models: ["Section"]
      components: ["TableOfContents"]
    F-005:
      api_endpoints: ["/api/papers/{id}/translate"]
      data_models: ["Translation"]
      components: ["TranslationToggle"]
    F-006:
      api_endpoints: ["/api/papers/{id}/analyze"]
      data_models: ["Analysis"]
      components: ["PDFViewer"]
    F-007:
      api_endpoints: ["/api/papers/{id}/analysis"]
      data_models: ["Analysis"]
      components: ["SidePanel"]
    F-008:
      api_endpoints: ["/api/papers/{id}/keywords/{term}/explain"]
      data_models: ["Analysis"]
      components: ["SidePanel", "KeywordBottomSheet"]

  # 기능 → UI 매핑
  # "이 기능은 어떤 화면에서 사용되나?"
  features_to_ui:
    F-001: ["SCR-001.upload_dropzone"]
    F-002: ["SCR-001.url_input"]
    F-003: ["SCR-002.pdf_viewer"]
    F-004: ["SCR-002.toc_sidebar"]
    F-005: ["SCR-002.translation_toggle"]
    F-006: ["SCR-002.pdf_viewer"]
    F-007: ["SCR-002.side_panel"]
    F-008: ["SCR-002.side_panel", "SCR-002.keyword_bottomsheet"]

  # UI → 디자인 시스템 매핑
  # "이 화면은 어떤 QDS4 컴포넌트/토큰을 사용하나?"
  ui_to_design_system:
    SCR-001:
      qds4_components:
        - "TopAppBar"
        - "Button"
        - "IconButton"
        - "Typography"
        - "Spinner"
        - "Tag"
        - "Icon"
        - "StandardDialog"
        - "BottomSheet"
      color_tokens:
        - "blue_50"
        - "gray_60"
        - "gray_100"
        - "gray_95"
        - "red_50"
      typography_tokens:
        - "large_title"
        - "body_1"
        - "body_2"
        - "caption_1"
    SCR-002:
      qds4_components:
        - "TopAppBar"
        - "IconButton"
        - "Switch"
        - "SegmentedControl"
        - "Spinner"
        - "Typography"
        - "Tabs"
        - "Tag"
        - "TextButton"
        - "Divider"
        - "BottomSheet"
        - "LoadingAnimation"
        - "StateLayer"
      color_tokens:
        - "blue_50"
        - "blue_95"
        - "gray_50"
        - "gray_10"
        - "yellow_20"
      typography_tokens:
        - "title_2"
        - "title_3"
        - "body_1"
        - "body_2"
        - "caption_1"
    SCR-003:
      qds4_components:
        - "TopAppBar"
        - "Button"
        - "FloatingActionButton"
        - "IconButton"
        - "Typography"
        - "Tag"
        - "Spinner"
        - "LoadingAnimation"
        - "AlertDialog"
        - "StateLayer"
        - "Shadow"
        - "Icon"
      color_tokens:
        - "blue_50"
        - "gray_50"
        - "gray_100"
        - "red_50"
      typography_tokens:
        - "title_1"
        - "title_2"
        - "title_3"
        - "body_1"
        - "caption_1"

  # 기능 → 코드 매핑 (구현 후 자동 업데이트)
  # "이 기능의 실제 코드는 어디에 있나?"
  features_to_code:
    # 구현 완료 후 자동으로 채워짐
    F-001:
      files: []
      tests: []
    F-002:
      files: []
      tests: []
    F-003:
      files: []
      tests: []
    F-004:
      files: []
      tests: []
    F-005:
      files: []
      tests: []
    F-006:
      files: []
      tests: []
    F-007:
      files: []
      tests: []
    F-008:
      files: []
      tests: []

# ============================================================
# 역방향 매핑 (자동 생성용 참고)
# ============================================================
# 아래는 위 매핑에서 자동으로 생성 가능
# 스크립트가 이를 자동으로 계산하여 사용

reverse_mappings:
  # 코드 → 기능 (코드 수정 시 영향받는 기능 파악)
  code_to_features: {}

  # 기능 → 요구사항 (기능 변경 시 영향받는 요구사항 파악)
  features_to_requirements:
    F-001: ["US-001"]
    F-002: ["US-001"]
    F-003: ["US-002"]
    F-004: ["US-002"]
    F-005: ["US-003"]
    F-006: ["US-004"]
    F-007: ["US-004"]
    F-008: ["US-005"]

# ============================================================
# 메타데이터
# ============================================================
metadata:
  created_at: "2025-01-13T14:30:00+09:00"
  last_updated: "2025-01-13T14:30:00+09:00"
  auto_generated: false
